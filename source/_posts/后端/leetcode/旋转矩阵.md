---
title: 旋转矩阵
date:  2020-04-7T21:10:03
categories: leetcode
tags:
- 每日一题
- 数组
---

给你一幅由 `N × N` 矩阵表示的图像，其中每个像素的大小为 4 字节。请你设计一种算法，将图像旋转 90 度。

不占用额外内存空间能否做到？

示例1:

```
给定 matrix = 
[
  [1,2,3],
  [4,5,6],
  [7,8,9]
],

原地旋转输入矩阵，使其变为:
[
  [7,4,1],
  [8,5,2],
  [9,6,3]
]
```

示例2:

```
给定 matrix =
[
  [ 5, 1, 9,11],
  [ 2, 4, 8,10],
  [13, 3, 6, 7],
  [15,14,12,16]
], 

原地旋转输入矩阵，使其变为:
[
  [15,13, 2, 5],
  [14, 3, 4, 1],
  [12, 6, 8, 9],
  [16, 7,10,11]
]
```

## 题目详解

首先，很容易想到通过临时数组保存旋转后到矩阵。通过模拟的方式执行，参见代码1。但是该方案需要额外的内存。后续咱们深入看看样例。发现存在下列情况：

1. 将矩阵第i行与第n-i行对换，即按照行对称翻转
2. 再将矩阵按照左对角线对换

通过上述2个操作可以实现旋转90度。参见代码2

```
  [1,2,3]        [7,8,9]       [7,4,1]    
  [4,5,6]  -->   [4,5,6]  -->  [8,5,2]
  [7,8,9]        [1,2,3]       [9,6,3]
```

## 代码1

```go
func rotate(matrix [][]int) {
	var start int
	var end = len(matrix) - 1
	var tmp = make([][]int, end+1)
	for i := 0; i <= end; i++ {
		tmp[i] = make([]int, end+1)
	}
	for start <= end {
    // 转换第一行
		for i := start; i <= end; i++ {
			tmp[i][end] = matrix[start][i]
		}
    // 转换最后一行
		for i := start; i <= end; i++ {
			tmp[i][start] = matrix[end][i]
		}
    // 转换最右列
		for i := start + 1; i <= end-1; i++ {
			tmp[end][end-i+start] = matrix[i][end]
		}
    // 转换最左列
		for i := start + 1; i <= end-1; i++ {
			tmp[start][end-i+start] = matrix[i][start]
		}
		start++
		end--
	}
	for i := 0; i < len(matrix); i++ {
		for j := 0; j < len(matrix); j++ {
			matrix[i][j] = tmp[i][j]
		}
	}
}
```

## 代码2

```go
func rotate(matrix [][]int)  {
	var row = len(matrix) - 1
	for i := 0; i <= row/2; i++ {
		for j:=0;j<=row;j++{
			matrix[i][j], matrix[row-i][j] = matrix[row-i][j], matrix[i][j]
		}
	}
	for i := 0; i <= row; i++ {
		for j := i + 1; j <= row; j++ {
			matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]
		}
	}
}
```



