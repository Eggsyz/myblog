---
title: "区块链Fabric入门简介"
date:  2020-04-25 10:33:03
categories: 区块链
tags:
- fabric

---

本文主要介绍区块链Fabric的基本概念。

## Fabric 入门简介

### 区块链介绍

第一个被广为人知的区块链应用是加密货币[比特币](https://en.wikipedia.org/wiki/Bitcoin)，而其他应用都是从它衍生出来的。区块链是一个由分布式网络中的*节点*维护的不可篡改的账本。这些节点通过执行被*共识协议*验证过的交易来各自维护一个账本的副本，账本以区块的形式存在，每个区块通过哈希和之前的区块相连。随着区块链的发展，区块链被定义为1.0、2.0、3.0时代。

+ 区块链1.0是以比特币为代表的虚拟货币的时代，目标是实现货币的去中心化与支付手段。
+ 区块链2.0是指智能合约的出现。其代表是"以太坊"。
+ 区块链3.0是指区块链在金融行业之外的各行业的应用场景，能够满足更加复杂的商业逻辑。

并且在区块链领域经常出现的公有链、私有链、联盟链。这是基于参与节点权限进行划分的。

+ 公有链（Public blockchain）是指全世界任何人都可以随时进入到系统中读取数据、发送可确认交易、竞争记账的区块链。
+ 私有链（Private Blockchain）是指其写入权限由某个组织和机构控制的区块链，参与节点的资格会被严格限制。
+ 联盟链（Consortium Blockchain）是指有若干个机构共同参与管理的区块链，每个机构都运行着一个或多个节点，其中的数据只允许系统内不同的机构进行读写和发送交易，并且共同来记录交易数据。

### Fabric 简介

Hyperledger Fabric 是超级账本中的区块链项目之一。和其他区块链技术一样，它有一个账本，使用智能合约，是一个参与者管理交易的系统。

Hyperledger Fabric 与其他区块链系统的不同之处在于，它是 **私有的** 和 **许可的**。与其他流行的分布式账本或区块链平台相比，它有以下这些主要的区别。

+ 是许可链，参与者必须是已认证的或者可识别的
+ 具有高度**模块化**和**可配置**的架构
+ 支持通用编程语言编写智能合约（如 Java、Go 和 Node.js）
+ 支持**可插拔的共识协议**
+ **不需要原生加密货币**的共识协议来进行激励

### Fabric基本概念

#### 账本

Hyperledger Fabric 中的**账本**由“世界状态“和”区块链“这两部分组成。**世界状态**是一个数据库，它存储了一组账本状态的**当前值**。通过世界状态，程序可以直接访问一个账本状态的当前值，不需要遍历整个交易日志来计算当前值。**区块链**是交易日志，它记录了当前世界状态的所有改变的历史记录。可以类比我们的银行账户，世界状态就是记录了你当前的余额，区块链记录了你所有的交易流水。

#### 世界状态

世界状态记录业务对象属性的当前值（最新值）。Hyperledger Fabric 使用数据库来实现世界状态。当前主要是CouchDB和LevelDB。当需要更新世界状态时，需要发送一笔交易，并且需要经过足够的节点背书。当交易成功且有效时，会更新世界状态。

#### 区块链

世界状态存储了与业务对象当前状态相关的事实信息，而区块链是一种历史记录，它记录了这些业务对象是如何到达各自当前状态的相关事实。区块链记录了每个账本状态之前的所有版本以及状态是如何被更改的。

<img src="https://hyperledger-fabric-cn.readthedocs.io/zh/latest/_images/ledger.diagram.2.png" alt="ledger.blockchain" style="zoom:50%;" />

区块链是一个链式结构，包含很多区块，每个区块的头部都包含区块交易的一个哈希，以及前一个区块头的哈希。第一个区块称之为“创世区块”，也是0号区块。在Fabric中，创世区块一般包括当前链的一些配置。包括采用哪种共识算法、包含哪些组织、组织锚节点等信息。

#### 区块

区块包含区块头、区块数据及区块元数据三个部分。区块结构如下图所示：

![ledger.blocks](https://hyperledger-fabric-cn.readthedocs.io/zh/latest/_images/ledger.diagram.4.png)

区块头包含三个字段，这些字段是在创建一个区块时候被写入的。

- **区块编号**：编号从0（初始区块）开始，每在区块链上增加一个新区块，编号的数字都会加1。
- **当前区块的哈希值**：当前区块中包含的所有交易的哈希值。
- **前一个区块头的哈希值**：区块链中前一个区块头的哈希值。

**区块数据**包含了一个有序的交易列表。**区块元数据**包含了区块写入者的证书、公钥以及签名，并且包含交易的标示。

#### 交易

交易记录了世界状态发生的更新。交易包含很多字段，如图所示，包含交易头、创建者签名、背书节点的签名、交易提案等信息。

<img src="https://hyperledger-fabric-cn.readthedocs.io/zh/latest/_images/ledger.diagram.5.png" alt="ledger.transaction"  />

### 参考

[Fabric中文文档](https://hyperledger-fabric-cn.readthedocs.io/zh/latest)

